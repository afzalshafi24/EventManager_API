# EventManager_API

EventManager API is an API application designed to capture, store, and manage anomaly or threshold based events provided from diverse different event detection backend systems. This solution not only provides a centralized and scalable database for logging events but also integrates seamlessly with SPARK for automated report generation.

Key features include:

* Event Polling: Can poll for new events for in a database generated by Cat3 Event Detection Software
* Centralized Event Storage: Collect and store anomaly events from multiple backend applications in a secure, scalable database, ensuring easy access and management.
* Scalable Architecture:  Easily add event detection software into the workflow without any code updates
* Advanced Querying Capabilities: Utilize a flexible querying interface to retrieve specific data points, enabling frontend applications to visualize anomalies and trends effectively.
* Automated Reporting with SPARK: Leverage the power of SPARK to generate comprehensive reports based on stored event data, providing detailed analysis in regards to events.
* Provide Event Statistics: Feed event statistics to frontend applications.
* Heartbeat Monitoring: Store and update optional heartbeat messages to monitor health of all backend event detection applications (Optional)
* User-Friendly API: Endpoints to facilitate integration with existing event detection systems and frontend applications for data visualization with SQL databases

## Event Definition:
An Event in the EventManager API is defined by the following attributes and stored in the EventManagerAPI_DB table:

+ unique_index (Integer): DB Table Unique Index, serving as the primary key for the event.
+ scid (Integer): Unique identifier for specific payload.
+ event_time (String): The time when the event was triggered.
+ event_rule_id (Integer): Unique ID for the given event rule.
+ event_name (String): Name of the event.
+ event_rule (String): Conditional statements used to trigger the event.
+ event_src (String): The event detection application where the event was detected.
+ spark_script (String): Spark wrapper script to run for the given event.
+ spark_report_id (Integer):  Unique Report ID provided to SPARK for a given event
+ gem_full_path(String): Path to any external data products generated by any Event Detection Software



## Table of Contents
- [Installation](#installation)
- [Required Libraries](#Required_Libraries)
- [Usage](#usage)

## Installation
1. Clone Repo from https://github.com/afzalshafi24/ECQL_Webapp
2. Make sure you have the needed libraries from Python

## Required_Libraries
	altair==5.5.0
	annotated-types==0.7.0
	anyio==4.9.0
	attrs==25.3.0
	blinker==1.9.0
	cachetools==5.5.2
	certifi==2025.4.26
	charset-normalizer==3.4.2
	click==8.2.1
	colorama==0.4.6
	fastapi==0.115.12
	gitdb==4.0.12
	GitPython==3.1.44
	greenlet==3.2.2
	h11==0.16.0
	idna==3.10
	Jinja2==3.1.6
	jsonschema==4.24.0
	jsonschema-specifications==2025.4.1
	MarkupSafe==3.0.2
	narwhals==1.41.0
	numpy==2.2.6
	packaging==24.2
	pandas==2.2.3
	pillow==11.2.1
	protobuf==6.31.1
	pyarrow==20.0.0
	pydantic==2.11.5
	pydantic_core==2.33.2
	pydeck==0.9.1
	python-dateutil==2.9.0.post0
	pytz==2025.2
	referencing==0.36.2
	requests==2.32.3
	rpds-py==0.25.1
	six==1.17.0
	smmap==5.0.2
	sniffio==1.3.1
	SQLAlchemy==2.0.41
	starlette==0.46.2
	streamlit==1.45.1
	tenacity==9.1.2
	toml==0.10.2
	tornado==6.5.1
	typing-inspection==0.4.1
	typing_extensions==4.14.0
	tzdata==2025.2
	urllib3==2.4.0
	uvicorn==0.34.3
	watchdog==6.0.0
               

## Usage
1. Navigate to the Parent Directory
2. Start the API script with the following command
```bash
python .\API\main.py
```
3. Start the SPARK Emulator with the following command
```bash
python .\SPARK_Emulator\SPARK_Emulator.py
```
4. Start the ECQL Emulator with the following command
```bash
python .\ECQL_Emulator\ECQL_emulator.py .\ECQL_Emulator\ECQL_emulator_config.ini
```
4. Start the Web App with the following command
```bash
 streamlit.exe run .\Visualization\app.py
```
